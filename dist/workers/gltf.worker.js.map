{"version":3,"sources":["webpack://@smth-for/three-utils-webworker/./src/workers/gltf.worker.js"],"names":["loaderManager","THREE","LoadingManager","gltfLoader","GLTFLoader","dracoLoader","DRACOLoader","setDracoDecoderPath","dracoUrl","setDecoderPath","setDRACOLoader","addEventListener","message","data","action","url","postMessage","id","error","load","gltf","undefined","err","imageBitmap"],"mappings":"mBAEA,MAAMA,EAAgB,IAAIC,MAAMC,eAC1BC,EAAa,IAAIC,WAAWJ,GAC5BK,EAAc,IAAIC,YAoCxB,SAASC,EAAoBC,GACzBH,EAAYI,eAAeD,GAE3BL,EAAWO,eAAeL,GAtC9BF,EAAWO,eAAeL,GAE1BM,iBAAiB,WAAW,SAAUC,GAElC,OAAOA,EAAQC,KAAKC,QAChB,IAAK,OACDP,EAAoBK,EAAQC,KAAKE,KACjCC,YAAY,CAAEC,GAAIL,EAAQC,KAAKI,GAAIH,OAAQF,EAAQC,KAAKC,OAAQI,MAAO,OACvE,MACJ,IAAK,QAab,SAAcN,GACPA,EAAQC,KAAKE,IACZZ,EAAWgB,KACTP,EAAQC,KAAKE,KACZK,GAASJ,YAAY,CAAEC,GAAIL,EAAQC,KAAKI,GAAIG,KAAMA,EAAMF,MAAO,aAChEG,GACCC,GAAQN,YAAY,CAAEC,GAAIL,EAAQC,KAAKI,GAAIG,KAAM,KAAMF,MAAOI,MAGjEN,YAAY,CAAEC,GAAIL,EAAQC,KAAKI,GAAIM,YAAa,KAAML,MAAO,yBArBzDC,CAAKP,GACL,MACJ,QACII,YAAY,CAAEC,GAAIL,EAAQC,KAAKI,GAAIH,OAAQF,EAAQC,KAAKC,OAAQI,MAAO,mBAIpD,SAAxBN,EAAQC,KAAKC,QACZP,EAAoBK,EAAQC,KAAKE,S","file":"workers/gltf.worker.js","sourcesContent":["import {  } from \"three\";\n\nconst loaderManager = new THREE.LoadingManager();\nconst gltfLoader = new GLTFLoader(loaderManager);\nconst dracoLoader = new DRACOLoader();\ngltfLoader.setDRACOLoader(dracoLoader);\n\naddEventListener(\"message\", function (message) {\n\n    switch(message.data.action) {\n        case 'init':\n            setDracoDecoderPath(message.data.url);\n            postMessage({ id: message.data.id, action: message.data.action, error: null })\n            break;\n        case 'load':\n            load(message);\n            break;\n        default:\n            postMessage({ id: message.data.id, action: message.data.action, error: 'Missing action' })\n            break;\n    }\n\n    if(message.data.action === \"init\") {\n        setDracoDecoderPath(message.data.url);\n    }\n});\n\nfunction load(message) {\n    if(message.data.url) {\n        gltfLoader.load(\n          message.data.url,\n          (gltf) => postMessage({ id: message.data.id, gltf: gltf, error: null }),\n          undefined,\n          (err) => postMessage({ id: message.data.id, gltf: null, error: err })\n        );\n      } else {\n        postMessage({ id: message.data.id, imageBitmap: null, error: 'Missing Resource URL' })\n      }\n}\n\nfunction setDracoDecoderPath(dracoUrl) {\n    dracoLoader.setDecoderPath(dracoUrl);\n    // this.dracoLoader.setDecoderConfig({ type: 'js' });\n    gltfLoader.setDRACOLoader(dracoLoader);\n  }"],"sourceRoot":""}